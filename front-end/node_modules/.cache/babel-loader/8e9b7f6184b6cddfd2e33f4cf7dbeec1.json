{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chris\\\\Desktop\\\\TL19-14\\\\front-end\\\\src\\\\Auth.js\";\nimport React, { Component } from 'react';\nimport { UserContext } from './UserContext';\nexport class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.username = React.createRef();\n    this.password = React.createRef();\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(event) {\n    console.log('ref to username: ', this.username.current);\n    const u = this.username.current.value;\n    const p = this.password.current.value;\n    console.log('Submitting...', u, p);\n    fetch('http://localhost:5000/energy/api/Login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: new URLSearchParams({\n        \"username\": u,\n        \"password\": p\n      })\n    }).then(response => response.json()).then(json => {\n      console.log(json); //store the user's data in local storage\n      //to make them available for the next\n      //user's visit\n\n      localStorage.setItem('token', json.token);\n      localStorage.setItem('username', u); //use the setUserData function available\n      //through the UserContext\n\n      this.context.setUserData(json.token, u); //use the history prop available through\n      //the Route to programmatically navigate\n      //to another route            \n\n      this.props.history.push('/main');\n    });\n    event.preventDefault();\n  }\n\n  render() {\n    return React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"input\", {\n      id: \"username\",\n      type: \"text\",\n      ref: this.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      id: \"password\",\n      type: \"password\",\n      ref: this.password,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"Login\"));\n  }\n\n}\nLogin.contextType = UserContext;\nexport class Logout extends Component {\n  doLogout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('username');\n    this.context.setUserData(null, null);\n    this.props.history.push('/');\n  }\n\n  componentDidMount() {\n    //perform an ajax call to logout\n    //and then clean up local storage and\n    //context state.\n    console.log('TEST');\n    console.log(this.context.token);\n    fetch('http://localhost:5000/energy/api/Logout', {\n      method: 'POST',\n      headers: {\n        'X-OBSERVATORY-AUTH': this.context.token,\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }\n    }).then(() => this.doLogout());\n  }\n\n  render() {\n    return React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Loggin out...\");\n  }\n\n}\nLogout.contextType = UserContext;","map":{"version":3,"sources":["C:/Users/chris/Desktop/TL19-14/front-end/src/Auth.js"],"names":["React","Component","UserContext","Login","constructor","props","username","createRef","password","handleSubmit","bind","event","console","log","current","u","value","p","fetch","method","headers","body","URLSearchParams","then","response","json","localStorage","setItem","token","context","setUserData","history","push","preventDefault","render","contextType","Logout","doLogout","removeItem","componentDidMount"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { UserContext } from './UserContext';\r\n\r\nexport class Login extends Component {        \r\n    \r\n    static contextType = UserContext;\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.username = React.createRef();\r\n        this.password = React.createRef();\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n    \r\n    handleSubmit(event) {\r\n        console.log('ref to username: ', this.username.current);\r\n        \r\n        const u = this.username.current.value;\r\n        const p = this.password.current.value;\r\n        console.log('Submitting...', u, p);\r\n        \r\n        fetch('http://localhost:5000/energy/api/Login',{\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type':'application/x-www-form-urlencoded',\r\n            },\r\n            body: new URLSearchParams({\r\n                \"username\": u,\r\n                \"password\": p\r\n            })\r\n        }).then((response) => response.json())\r\n        .then(json => {   \r\n\r\n            console.log(json);\r\n\r\n            //store the user's data in local storage\r\n            //to make them available for the next\r\n            //user's visit\r\n            localStorage.setItem('token', json.token);\r\n            localStorage.setItem('username', u);\r\n\r\n            //use the setUserData function available\r\n            //through the UserContext\r\n            this.context.setUserData(json.token, u);\r\n            \r\n            //use the history prop available through\r\n            //the Route to programmatically navigate\r\n            //to another route            \r\n            this.props.history.push('/main');\r\n        });\r\n        \r\n        event.preventDefault();\r\n    }\r\n    \r\n    render() {        \r\n        return (                                    \r\n            <form onSubmit={this.handleSubmit}>\r\n\r\n                <label htmlFor=\"username\">Username</label>\r\n                <input id=\"username\" type=\"text\" ref={this.username} />\r\n\r\n                <label htmlFor=\"password\">Password</label>\r\n                <input id=\"password\" type=\"password\" ref={this.password} />                \r\n\r\n                <button className=\"btn btn-primary\" type=\"submit\">\r\n                    Login\r\n                </button>\r\n            </form>\r\n        );        \r\n    }    \r\n}\r\n\r\nexport class Logout extends Component {\r\n    \r\n    static contextType = UserContext;\r\n    \r\n    doLogout() {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('username');\r\n                    \r\n        this.context.setUserData(null, null);\r\n        \r\n        this.props.history.push('/');\r\n    }\r\n    \r\n    componentDidMount() {\r\n        //perform an ajax call to logout\r\n        //and then clean up local storage and\r\n        //context state.\r\n        console.log('TEST')\r\n        console.log(this.context.token)\r\n\r\n        fetch('http://localhost:5000/energy/api/Logout',{\r\n            method: 'POST',\r\n            headers: {\r\n                'X-OBSERVATORY-AUTH': this.context.token,\r\n                'Content-Type':'application/x-www-form-urlencoded',\r\n            }\r\n        }).then(() => this.doLogout());\r\n    }\r\n    \r\n    render() {\r\n        return (<h2>Loggin out...</h2>);\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}